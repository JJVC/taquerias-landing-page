---
permalink: /test-cupon.html
---
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Prueba de Generador de Cupones</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: 50px auto;
      padding: 20px;
      background: #f5f5f5;
    }
    .container {
      background: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    h1 {
      color: #333;
      border-bottom: 2px solid #ff6b35;
      padding-bottom: 10px;
    }
    .cupon-display {
      background: #ff6b35;
      color: white;
      padding: 20px;
      border-radius: 5px;
      font-size: 24px;
      font-weight: bold;
      text-align: center;
      margin: 20px 0;
      letter-spacing: 2px;
    }
    .info {
      background: #f0f0f0;
      padding: 15px;
      border-radius: 5px;
      margin: 10px 0;
    }
    button {
      background: #ff6b35;
      color: white;
      border: none;
      padding: 12px 30px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      margin: 5px;
    }
    button:hover {
      background: #e55a2b;
    }
    .details {
      margin-top: 20px;
      padding: 15px;
      background: #e8f5e9;
      border-left: 4px solid #4caf50;
    }
    .example {
      margin: 10px 0;
      padding: 10px;
      background: #fff3e0;
      border-left: 4px solid #ff9800;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üéüÔ∏è Generador de Cupones Din√°micos</h1>
    
    <div class="info">
      <strong>Patr√≥n del cup√≥n:</strong> [B1]-[B2]-[B3]-[B4]
      <ul>
        <li><strong>B1 (4 chars):</strong> Y R R R (Y=A√±o en Base36, R=aleatorio)</li>
        <li><strong>B2 (4 chars):</strong> R R M M (RR=aleatorio, MM=mes 01-12)</li>
        <li><strong>B3 (4 chars):</strong> R D D R (DD=d√≠a 01-31, extremos aleatorios)</li>
        <li><strong>B4 (4 chars):</strong> H H M M (HHMM=hora exacta 24h)</li>
      </ul>
    </div>

    <div class="cupon-display" id="cuponDisplay">
      Cargando...
    </div>

    <div style="text-align: center;">
      <button onclick="generarNuevoCupon()">üîÑ Generar Nuevo Cup√≥n</button>
      <button onclick="copiarCupon()">üìã Copiar Cup√≥n</button>
    </div>

    <div class="details" id="detalles">
      <!-- Aqu√≠ se mostrar√°n los detalles -->
    </div>

    <div class="example">
      <strong>Ejemplo:</strong><br>
      04/Feb/2026 a las 13:25 ‚Üí <code>QLZA-LK02-X04T-1325</code>
    </div>
  </div>

  <script>
    // ============================================
    // GENERADOR DE CUPONES DIN√ÅMICOS
    // ============================================

    /**
     * Genera un cup√≥n √∫nico basado en la fecha y hora actual
     * Formato: [B1]-[B2]-[B3]-[B4]
     */
    function generarCupon() {
      const ahora = new Date();
      
      // Funciones auxiliares
      const obtenerA√±oBase36 = () => {
        const a√±o = ahora.getFullYear();
        const dosUltimosDigitos = a√±o % 100; // 2026 -> 26
        return dosUltimosDigitos.toString(36).toUpperCase(); // 26 -> Q
      };
      
      const obtenerAleatorio = () => {
        const chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ';
        return chars[Math.floor(Math.random() * chars.length)];
      };
      
      const pad = (num) => String(num).padStart(2, '0');
      
      // B1: Y R R R (A√±o Base36 + 3 aleatorios)
      const b1 = obtenerA√±oBase36() + obtenerAleatorio() + obtenerAleatorio() + obtenerAleatorio();
      
      // B2: R R M M (2 aleatorios + Mes)
      const mes = pad(ahora.getMonth() + 1); // 0-indexed, as√≠ que +1
      const b2 = obtenerAleatorio() + obtenerAleatorio() + mes;
      
      // B3: R D D R (aleatorio + D√≠a + aleatorio)
      const dia = pad(ahora.getDate());
      const b3 = obtenerAleatorio() + dia + obtenerAleatorio();
      
      // B4: H H M M (Hora y minutos exactos)
      const hora = pad(ahora.getHours());
      const minutos = pad(ahora.getMinutes());
      const b4 = hora + minutos;
      
      return `${b1}-${b2}-${b3}-${b4}`;
    }

    function mostrarDetalles(cupon) {
      const ahora = new Date();
      const partes = cupon.split('-');
      
      const a√±o = parseInt(partes[0][0], 36) + 2000; // Convertir de base36
      const mes = partes[1].substring(2, 4);
      const dia = partes[2].substring(1, 3);
      const hora = partes[3].substring(0, 2);
      const minutos = partes[3].substring(2, 4);
      
      const meses = ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'];
      
      document.getElementById('detalles').innerHTML = `
        <h3>üìä Detalles del Cup√≥n</h3>
        <p><strong>Cup√≥n generado:</strong> <code style="font-size: 18px; background: #fff; padding: 5px;">${cupon}</code></p>
        <p><strong>Fecha/Hora actual:</strong> ${dia}/${meses[parseInt(mes)-1]}/${a√±o} a las ${hora}:${minutos}</p>
        <hr>
        <p><strong>Desglose:</strong></p>
        <ul>
          <li><strong>B1:</strong> ${partes[0]} ‚Üí A√±o: <strong>${a√±o}</strong> (${partes[0][0]} en Base36) + 3 aleatorios (${partes[0].substring(1)})</li>
          <li><strong>B2:</strong> ${partes[1]} ‚Üí 2 aleatorios (${partes[1].substring(0,2)}) + Mes: <strong>${mes}</strong></li>
          <li><strong>B3:</strong> ${partes[2]} ‚Üí Aleatorio (${partes[2][0]}) + D√≠a: <strong>${dia}</strong> + Aleatorio (${partes[2][3]})</li>
          <li><strong>B4:</strong> ${partes[3]} ‚Üí Hora: <strong>${hora}:${minutos}</strong></li>
        </ul>
      `;
    }

    function generarNuevoCupon() {
      const cupon = generarCupon();
      document.getElementById('cuponDisplay').textContent = cupon;
      mostrarDetalles(cupon);
    }

    function copiarCupon() {
      const cupon = document.getElementById('cuponDisplay').textContent;
      navigator.clipboard.writeText(cupon).then(() => {
        alert('‚úì Cup√≥n copiado: ' + cupon);
      });
    }

    // Generar cup√≥n inicial
    window.onload = generarNuevoCupon;
  </script>
</body>
</html>
